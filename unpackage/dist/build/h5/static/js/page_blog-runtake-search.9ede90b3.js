(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["page_blog-runtake-search"],{"0139":function(t,e,a){"use strict";var i=a("6c5a"),n=a.n(i);n.a},"18dc":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.container[data-v-55ad3710]{height:100%;flex:1;background-color:#f7f7f7}.search-body[data-v-55ad3710]{background-color:#fff;border-bottom-right-radius:10px;border-bottom-left-radius:10px}.flex-center[data-v-55ad3710]{display:flex;justify-content:center;align-items:center}.flex-row[data-v-55ad3710]{display:flex;flex-direction:row}[data-v-55ad3710]\r\n.uni-searchbar__box{border-width:0}[data-v-55ad3710]\r\n.uni-input-placeholder{font-size:%?28?%}.search-container[data-v-55ad3710]{height:52px;display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative;background-color:#fff}.search-container-bar[data-v-55ad3710]{display:flex;flex-direction:row;justify-content:center;align-items:center;position:absolute;top:0;left:0;right:0}.search-associative[data-v-55ad3710]{overflow-y:auto;position:absolute;top:52px;left:0;right:0;bottom:0;background-color:#fff;margin-top:%?10?%;padding-left:%?10?%;padding-right:%?10?%}.search-icons[data-v-55ad3710]{padding:%?16?%}.word-display[data-v-55ad3710]{font-size:%?26?%;color:#666}.word-container[data-v-55ad3710]{padding:%?20?%}.word-container_header[data-v-55ad3710]{display:flex;height:%?72?%;line-height:%?72?%;flex-direction:row;justify-content:space-between;align-items:center}.word-container_header-text[data-v-55ad3710]{color:#3e3e3e;font-size:%?30?%;font-weight:700}.word-container_body[data-v-55ad3710]{display:flex;flex-wrap:wrap;flex-direction:row}.word-container_body-text[data-v-55ad3710]{display:flex;font-size:%?26?%;color:#666;justify-content:center;align-items:center;background-color:#f6f6f6;padding:%?10?% %?20?%;margin:%?20?% %?30?% 0 0;border-radius:%?30?%;box-sizing:border-box;text-align:center}.word-container_body-info[data-v-55ad3710]{display:block;flex:1;text-align:center;font-size:%?26?%;color:grey;margin-top:%?20?%}',""]),t.exports=e},"279c":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var i={uniSearchBar:a("83e2").default,uniIcons:a("f6de").default,unicloudDb:a("960d").default,uniList:a("8801").default,uniListItem:a("462c").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"container"},[a("v-uni-view",{staticClass:"search-container"},[a("v-uni-view",{staticClass:"search-container-bar"},[a("uni-search-bar",{ref:"searchBar",staticStyle:{flex:"1"},attrs:{radius:"100",focus:t.focus,placeholder:t.hotWorld,clearButton:"auto",cancelButton:"always"},on:{clear:function(e){arguments[0]=e=t.$handleEvent(e),t.clear.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)},cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel.apply(void 0,arguments)}},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}})],1)],1),a("v-uni-view",{staticClass:"search-body"},[t.localSearchList.length?a("v-uni-view",{staticClass:"word-container"},[a("v-uni-view",{staticClass:"word-container_header"},[a("v-uni-text",{staticClass:"word-container_header-text"},[t._v("搜索历史")]),t.localSearchListDel?a("v-uni-view",{staticClass:"flex-center flex-row",staticStyle:{"font-weight":"500","justify-content":"space-between"}},[a("v-uni-text",{staticStyle:{"font-size":"22rpx",color:"#666","padding-top":"4rpx","padding-bottom":"4rpx","padding-right":"20rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.LocalSearchListClear.apply(void 0,arguments)}}},[t._v("全部删除")]),a("v-uni-text",{staticStyle:{"font-size":"22rpx",color:"#c0402b","padding-top":"4rpx","padding-bottom":"4rpx","padding-left":"20rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.localSearchListDel=!1}}},[t._v("完成")])],1):a("uni-icons",{staticClass:"search-icons",staticStyle:{"padding-right":"0"},attrs:{color:t.iconColor,size:"18",type:"trash"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.localSearchListDel=!0}}})],1),a("v-uni-view",{staticClass:"word-container_body"},t._l(t.localSearchList,(function(e,i){return a("v-uni-view",{key:i,staticClass:"flex-center flex-row word-container_body-text",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.LocalSearchlistItemClick(e,i)}}},[a("v-uni-text",{key:e,staticClass:"word-display"},[t._v(t._s(e))]),t.localSearchListDel?a("uni-icons",{attrs:{size:"12",type:"closeempty"}}):t._e()],1)})),1)],1):t._e(),a("v-uni-view",{staticClass:"word-container"},[a("v-uni-view",{staticClass:"word-container_header"},[a("v-uni-view",{staticClass:"flex-center flex-row"},[a("v-uni-text",{staticClass:"word-container_header-text"},[t._v("搜索发现")]),t.netHotListIsHide?t._e():a("uni-icons",{staticClass:"search-icons",attrs:{color:t.iconColor,size:"14",type:"reload"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.searchHotRefresh.apply(void 0,arguments)}}})],1),a("uni-icons",{staticClass:"search-icons",staticStyle:{"padding-right":"0"},attrs:{color:t.iconColor,size:"18",type:t.netHotListIsHide?"eye-slash":"eye"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.netHotListIsHide=!t.netHotListIsHide}}})],1),a("unicloud-db",{ref:"udb",attrs:{field:"content",collection:"opendb-search-hot",orderby:"create_date desc,count desc","page-data":"replace","page-size":10},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.data,n=e.loading,o=e.error;e.options;return[n&&!t.netHotListIsHide?a("v-uni-text",{staticClass:"word-container_body-info"},[t._v("正在加载...")]):a("v-uni-view",{staticClass:"word-container_body"},[t.netHotListIsHide?a("v-uni-view",{staticStyle:{flex:"1"}},[a("v-uni-text",{staticClass:"word-container_body-info"},[t._v("当前搜索发现已隐藏")])],1):[o?a("v-uni-text",{staticClass:"word-container_body-info"},[t._v(t._s(o.message))]):t._l(i,(function(e,i){return a("v-uni-text",{key:i,staticClass:"word-container_body-text",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.search(e.content)}}},[t._v(t._s(e.content))])}))]],2)]}}])})],1)],1),t.associativeShow?a("v-uni-view",{staticClass:"search-associative"},[a("uni-list",t._l(t.associativeList,(function(e,i){return a("uni-list-item",{key:e._id,attrs:{ellipsis:1,title:e.name,"show-extra-icon":!0,clickable:!0,"extra-icon":{size:18,color:t.iconColor,type:"search"}},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.associativeClick(e)}}})})),1)],1):t._e()],1)},o=[]},"4bcd":function(t,e,a){"use strict";var i=a("cec6"),n=a.n(i);n.a},"6c5a":function(t,e,a){var i=a("18dc");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("090699c4",i,!0,{sourceMap:!1,shadowMode:!1})},"94cc":function(t,e,a){"use strict";a.r(e);var i=a("279c"),n=a("f869");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("4bcd"),a("0139");var c=a("f0c5"),s=Object(c["a"])(n["default"],i["b"],i["c"],!1,null,"55ad3710",null,!1,i["a"],void 0);e["default"]=s.exports},cec6:function(t,e,a){var i=a("d7b9");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("f3955a0c",i,!0,{sourceMap:!1,shadowMode:!1})},d7b9:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,"\nuni-page-body[data-v-55ad3710]{height:100%;flex:1}\n",""]),t.exports=e},f869:function(t,e,a){"use strict";a.r(e);var i=a("fa79"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},fa79:function(t,e,a){"use strict";(function(t){a("7a82");var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("ade3"));a("c975"),a("baa5"),a("a434"),a("ac1f"),a("841c"),a("3c65"),a("d3b7"),a("d401"),a("25f0"),a("4d63"),a("c607"),a("2c3e");var o={data:function(){return{mallGoodsDbName:"runtake",searchLogDbName:"opendb-search-log",localSearchList:uni.getStorageSync("__local_search_history"),localSearchListDel:!1,netHotListIsHide:!1,searchText:"",iconColor:"#999999",associativeList:[],keyBoardPopup:!1,hotWorld:"apple",focus:!0,speechEngine:"iFly"}},created:function(){this.db=t.database(),this.searchLogDb=this.db.collection(this.searchLogDbName),this.mallGoodsDb=this.db.collection(this.mallGoodsDbName),this.searchText=getApp().globalData.searchText},methods:{clear:function(t){console.log("res: ",t)},confirm:function(t){this.search(t.value)},cancel:function(t){uni.hideKeyboard(),this.searchText="",this.loadList()},search:function(t){(t||this.hotWorld)&&(t?(this.searchText!==t&&(this.searchText=t),this.localSearchListManage(t),this.searchLogDbAdd(t)):this.hotWorld&&(this.searchText=this.hotWorld),uni.hideKeyboard(),this.loadList(this.searchText))},localSearchListManage:function(t){var e=uni.getStorageSync("__local_search_history");e.length?(this.localSearchList.unshift(t),function(t){for(var e=t.length-1;e>=0;e--){var a=t.indexOf(t[e]),i=t.lastIndexOf(t[e]);a!=i&&t.splice(i,1)}}(this.localSearchList),this.localSearchList.length>10&&this.localSearchList.pop()):this.localSearchList=[t],uni.setStorageSync("__local_search_history",this.localSearchList)},LocalSearchListClear:function(){var t=this;uni.showModal({content:"确认清空搜索历史吗？",confirmText:"删除",confirmColor:"red",cancelColor:"#808080",success:function(e){e.confirm&&(t.localSearchListDel=!1,t.localSearchList=[],uni.removeStorageSync("__local_search_history"))}})},LocalSearchlistItemClick:function(t,e){if(this.localSearchListDel)return this.localSearchList.splice(e,1),uni.setStorageSync("__local_search_history",this.localSearchList),void(this.localSearchList.length||(this.localSearchListDel=!1));this.search(t)},searchHotRefresh:function(){this.$refs.udb.refresh()},speech:function(){},searchLogDbAdd:function(t){var e=this;this.getDeviceId().then((function(a){e.searchLogDb.add({device_id:a,content:t,create_date:Date.now()})}))},getDeviceId:function(){return new Promise((function(t,e){var a=uni.getStorageSync("uni_id");t(a||uni.getSystemInfoSync().system+"_"+Math.random().toString(36).substr(2))}))},associativeClick:function(t){console.log("associativeClick: ",t),this.loadList(t.name)},loadList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";getApp().globalData.searchText=t,uni.navigateBack()}},computed:{associativeShow:function(){return this.searchText&&this.associativeList.length}},watch:{searchText:function(t,e,a){var i=t,n=null,o=!0;return a&&i(),function(){var t=arguments,a=this;o&&(o=!1,i.apply(a,t)),n&&clearTimeout(n),n=setTimeout((function(){clearTimeout(n),n=null,i.apply(a,t)}),e||200)}}((function(t){var e=this;t?this.mallGoodsDb.where((0,n.default)({},"name",new RegExp(t,"gi"))).field("name,content,runtake_desc ").get().then((function(t){e.associativeList=t.result.data})):(this.associativeList.length=0,getApp().globalData.searchText="")}),100)}};e.default=o}).call(this,a("a9ff")["default"])}}]);